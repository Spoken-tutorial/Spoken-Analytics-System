{% extends 'base.html' %} {% load static %} {% load leaflet_tags %} {% load geojson_tags %} {% block title %}
<title>Visitor Map</title>
{% endblock %} {% block custom_css %} {% leaflet_css %}
<style>
    .leaflet-container {
        /* all maps */
        width: 100%;
        height: 500px;
    }
</style>
{% endblock %} {% block content %}

<!-- Begin Page Content -->
<div class="container-fluid">

    <!-- Page Heading -->
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-primary">Visitor Map</h1>
    </div>
    {% leaflet_map "spots" callback="window.map_init" %}


</div>
<!-- /.container-fluid -->

{% endblock %} {% block custom_js %} {% leaflet_js %}
<script type="text/javascript">
    var collection = {{ visitor_spots | geojsonfeature | safe }};
    options = {
        center: [51.505, -0.09],
        zoom: 13
    }

    function map_init(map, options) {
        L.geoJson(collection).addTo(map);
    }
</script>
<script src="{% static 'js/custom/custom-visitor-map.js' %}"></script>
{% endblock %}